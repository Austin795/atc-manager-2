webpackJsonp([4],{"Cji+":function(){},F0LX:function(e,t,n){"use strict";function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var b=n("EBst"),w=(n("OPYc"),n("VFww")),m=(n("jyJ7"),n("eSoh"),n("vzCy")),v=(n("LXEu"),n("XS46"),function(e){function t(){var t=o(this,e.call(this));return t.loadByIcao=function(e){return new Promise(function(n,o){var r,a,i,s;return t.loaded=!1,Promise.resolve(Promise.all([w.a.fetchAptByIcao(e),w.a.searchAptNavIcao(e)])).then(function(e){try{return r=e,a=r[0],i=r[1],s=i[0].split(" "),t.aptNav={icao:s[0],lat:s[1],lng:s[2],name:s.slice(3).join(" ")},t.apt=a,t.loaded=!1,t.emit("change"),n()}catch(e){return o(e)}},o)})},t.aptNav=null,t.apt=null,t.loaded=!1,t}return r(t,e),t}(m.EventEmitter)),j=new v,k=(n("Cji+"),function(e){function t(){a(this,t);var n=i(this,e.call(this));return n.handleGroundGameStoreChange=function(){n.setState({})},n.state={},n}return s(t,e),t.prototype.componentWillMount=function(){j.on("change",this.handleGroundGameStoreChange)},t.prototype.componentWillUnmount=function(){j.removeListener("change",this.handleGroundGameStoreChange)},t.prototype.render=function(){var e=this;if(this.props.loaded){var t=j.apt.rwys.map(function(t,n){var o=e.props.latLngToXY;return Object(b.h)("line",{key:n,x1:o(t.ends[0].lat),y1:o(t.ends[0].lng),x2:o(t.ends[1].lat),y2:o(t.ends[1].lng),stroke:"#fff",strokeWidth:"2"})});return Object(b.h)("g",{className:"GroundRunwaysSvg"},t)}},t}(b.Component)),O=k,P=function(e){function t(){c(this,t);var n=u(this,e.call(this));return n.handleGroundGameStoreChange=function(){n.setState({})},n.setRef=function(e){return n.svgRef=e},n.state={},n}return l(t,e),t.prototype.componentWillMount=function(){j.on("change",this.handleGroundGameStoreChange)},t.prototype.componentWillUnmount=function(){j.removeListener("change",this.handleGroundGameStoreChange)},t.prototype.render=function(){var e="undefined"!=typeof window?window.innerWidth:800,t="undefined"!=typeof window?window.innerHeight:600;return Object(b.h)("div",{className:"GroundRadarSvg"},Object(b.h)("svg",{ref:this.setRef,xmlns:"http://www.w3.org/2000/svg",className:"atc-view-svg",width:e,height:t,viewBox:"0 0 1280 720"},Object(b.h)(O,{loaded:this.props.loaded,latLngToXY:this.props.latLngToXY})))},t}(b.Component),x=P,_=function(e){function t(){p(this,t);var n=f(this,e.call(this));return n.state={},n}return h(t,e),t.prototype.componentWillMount=function(){},t.prototype.componentWillUnmount=function(){},t.prototype.render=function(){return Object(b.h)("div",{className:"GroundAptView"},Object(b.h)(x,{loaded:this.props.loaded,latLngToXY:this.props.latLngToXY}))},t}(b.Component),E=_,T=function(e,t){return[111132.954-559.822*Math.cos(2*t)+1.175*Math.cos(4*t),111132.954*Math.cos(e)]},L=function(e){function t(){d(this,t);var n=y(this,e.call(this));return n.getAptByIcao=function(e){return new Promise(function(t,o){var r,a,i,s,c;return n.setState({loaded:!1}),n.latLngToXY=null,Promise.resolve(j.loadByIcao(e)).then(function(){try{return r=j.apt,a=j.aptNav,i=T(a.lat,a.lng),s=i[0],c=i[1],n.latLngToXY=function(e,t){return[(e-a.lat)*s,(t-a.lng)*c]},n.setState({apt:r,aptNav:a,loaded:!0}),t()}catch(e){return o(e)}},o)})},n.state={loaded:!1},n}return g(t,e),t.prototype.componentWillMount=function(){this.getAptByIcao("EHRD")},t.prototype.componentWillUnmount=function(){},t.prototype.render=function(){return Object(b.h)("div",{className:"GroundGame"},Object(b.h)(E,{loaded:this.state.loaded,latLngToXY:this.latLngToXY}))},t}(b.Component);t.default=L},OPYc:function(){},VFww:function(e,t,n){"use strict";function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n("vzCy"),i=(n.n(a),n("LXEu")),s=n("XS46");t.a=new(function(e){function t(){var t=o(this,e.call(this));t.handleDataloaded=function(e){return console.log("data loaded"),t.loading=!1,t.emit("change"),e},t.searchAptNavIcao=function(e){return e=e.toUpperCase(),t.datPromise.then(function(t){var n=t[0];return n.split("\n").filter(function(t){return t.split(" ")[0].includes(e)})})},t.searchAptName=function(e){return t.datPromise.then(function(t){var n=t[0];return n.split("\n").filter(function(t){return t.split(" ").slice(3).join(" ").includes(e)})})},t.fetchAptByIcao=function(e){return new Promise(function(n,o){var r,a;return e=e.toUpperCase(),Promise.resolve(fetch(t.url+"airports/"+e+".dat.txt")).then(function(e){try{return r=e,Promise.resolve(r.text()).then(function(e){try{return a=e,n(Object(s.a)(a,!0)[0])}catch(e){return o(e)}},o)}catch(e){return o(e)}},o)})};var n=t.url="https://esstudio.site/apt-dat-parser-js/data/";t.loading=!0;var r=fetch(n+"apt_nav.dat.txt").then(function(e){return e.text()}),a=fetch(n+"earth_fix.dat.txt").then(function(e){return e.text()}),c=fetch(n+"earth_nav.dat.txt").then(function(e){return e.text()});return t.datPromise=Promise.all([r,a,c]).then(t.handleDataloaded).catch(function(e){Object(i.b)("Something wen't wrong while loading world data."),console.error(e)}),t}return r(t,e),t}(a.EventEmitter))},XS46:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(e,t){var n;e=e.split(/\r?\n/),t||(e=e.slice(3,-2));for(var o=[],r=void 0,a=void 0,i=void 0,s=void 0,c=void 0,u=void 0,l=void 0,p=void 0,f=void 0,h=void 0,d=void 0,y=void 0,g=0;g<e.length;g++)if(""!==e[g].trim()){var b=e[g].split("#")[0].split(/\s+/),w=+b[0];switch(w){case 1:case 16:case 17:r={},r.type=w,r.elevation=+b[1],r.hasTower="1"===b[2],r.identifier=b[4],r.name=b.slice(5).join(" "),r.rwys=[],r.helipads=[],r.taxiways=[],r.linearFeatures=[],r.aptBoundaries=[],r.viewpoints=[],r.startupLocations=[],r.startupLocationsLegacy=[],r.lightBeacons=[],r.windsocks=[],r.signs=[],r.lightingObjects=[],r.trafficFlowRules=[],r.metadata=[],r.truckParkings=[],r.truckDestinations=[],r.atc={recorded:[],unicom:[],cld:[],gnd:[],twr:[],app:[],dep:[]},o.push(r);break;case 100:a={},a.type=w,a.width=+b[1],a.surface=+b[2],a.shoulder=+b[3],a.smoothness=+b[4],a.centrelinelights="1"===b[5],a.edgeLighting="2"===b[6],a.autoGenerateDistanceRemainingSigns="1"===b[7],a.ends=[];for(var m=8;b[m];m+=9){var v={};a.ends.push(v),v.name=b[m],v.lat=+b[m+1],v.lng=+b[m+2],v.displacedThresholdInMeters=b[m+3],v.lengthOverrunOrBlastPadInMeters=b[m+4],v.runwayMarkings=+b[m+5],v.approachLighting=+b[m+6],v.tdz="1"===b[m+7],v.reil=+b[m+8]}r.rwys.push(a);break;case 101:a={},a.type=w,a.type="searwy",a.width=b[1],a.buoys="1"===b[2],a.ends=[];for(var j=3;b[j];j+=3){var k={};a.ends.push(k),k.name=b[j],k.lat=+b[j+1],k.lng=+b[j+2]}r.rwys.push(a);break;case 102:i={},i.type=w,i.designator=b[1],i.lat=+b[2],i.lng=+b[3],i.orientation=+b[4],i.length=+b[5],i.width=+b[6],i.surface=+b[7],i.markings=+b[8],i.shoulder=+b[9],i.smoothness=+b[10],i.edgeLighting="2"===b[11],r.helipads.push(i);break;case 110:s={},s.type=w,s.surface=+b[1],s.smoothness=+b[2],s.orientation=+b[3],s.description=b.slice(4).join(" "),s.nodes=[],r.taxiways.push(s);break;case 120:s={},s.type=w,s.description=b.slice(1).join(" "),s.nodes=[],r.linearFeatures.push(s);break;case 130:s={},s.type=w,s.description=b.slice(1).join(" "),s.nodes=[],r.aptBoundaries.push(s);break;case 111:case 112:case 113:case 114:case 115:case 116:y={},y.type=w,y.lat=+b[1],y.lng=+b[2],112!==w&&114!==w&&116!==w||(y.bezierLat=+b[3],y.bezierLng=+b[4]),115===w?(y.line=+b[3],y.lighting=+b[4]):116===w&&(y.line=+b[3],y.lighting=+b[4]),s.nodes.push(y);break;case 14:var O={};O.type=w,O.lat=+b[1],O.lng=+b[2],O.height=+b[3],O.name=b.slice(5).join(" "),r.viewpoints.push(O);break;case 15:var P={};P.type=w,P.lat=+b[1],P.lng=+b[2],P.heading=+b[3],P.name=b.slice(4).join(" "),r.startupLocationsLegacy.push(P);break;case 18:u={},u.type=w,u.lat=+b[1],u.lng=+b[2],u.color=+b[3],r.lightBeacons.push(u);break;case 19:l={},l.type=w,l.lat=+b[1],l.lng=+b[2],l.lighting="1"===b[3],l.name=b.slice(4).join(" "),r.windsocks.push(l);break;case 20:p={},p.type=w,p.lat=+b[1],p.lng=+b[2],p.orientation=+b[3],p.size=+b[5],p.text=b.slice(6).join(" "),r.signs.push(p);break;case 21:f={},f.type=w,f.lat=+b[1],f.lng=+b[2],f.lighting=+b[3],f.orientation=+b[4],f.glideslope=+b[5],f.runway=b[6],f.description=b.slice(7).join(" "),r.lightingObjects.push(f);break;case 1e3:h={},h.type=w,h.name=b.slice(1).join(" "),h.wind=[],h.ceiling=[],h.time=[],h.runways=[],h.vfrPatterns=[],r.trafficFlowRules.push(h);break;case 1001:var x={type:w,metar:b[1],min:+b[2],max:+b[3],windMax:+b[4]};h.wind.push(x);break;case 1002:var _={type:w,metar:b[1],minCeiling:+b[2]};h.ceiling=_;break;case 1003:var E={type:w,metar:b[1],visibility:+b[2]};h.visibility=E;break;case 1004:var T={type:w,start:+b[1],end:+b[2]};h.time=T;break;case 1100:var L=(n={type:w,name:b[1],frequency:b[2].slice(0,-2)+"."+b[2].slice(-2),trafficType:b[3],airplaneTypes:b[4].split("|"),headingRange:b[5],departureHeadingRange:b[6]},n.name=b.slice(7),n);h.runways.push(L);break;case 1101:var S={type:w,name:b[1],direction:b[2]};h.vfrPatterns.push(S);break;case 1200:r.taxiRoutingNetwork={type:w,nodes:[],edges:[],groundVehicleEdges:[]};break;case 1201:r.taxiRoutingNetwork.nodes.push({type:w,lat:+b[1],lng:+b[2],usage:b[3],identifier:b[4],name:b.slice(5)});break;case 1202:d={type:w,start:+b[1],end:+b[2],twoway:"twoway"===b[3],runway:"taxiway"===b[4],identifier:b.slice(5).join(" ")},r.taxiRoutingNetwork.edges.push(d);break;case 1204:d.activeZone={type:w,classification:b[1],runways:b.slice(2).join("").split(",")};break;case 1206:d={type:w,start:+b[1],end:+b[2],twoway:"twoway"===b[3]},r.taxiRoutingNetwork.groundVehicleEdges.push(d);break;case 1300:c={type:w,lat:+b[1],lng:+b[2],heading:+b[3],locationType:b[4],airplaneTypes:b[5].split("|"),name:b.slice(6).join(" "),metadata:[]},r.startupLocations.push(c);break;case 1301:c.metadata.push({type:w,code:b[1],operation:b[2],airline:b.slice(3)});break;case 1302:r.metadata.push({type:w,code:b[1],icao:b[2]});break;case 1400:r.truckParkings.push({type:w,lat:+b[1],lng:+b[2],heading:+b[3],parkingType:b[4],code:b[5],name:b.slice(6).join(" ")});break;case 50:case 51:case 52:case 53:case 54:case 55:case 56:var C={type:w,frequency:b[1].slice(0,-2)+"."+b[1].slice(-2),name:b.slice(2).join(" ")};r.atc[["recorded","unicom","cld","gnd","twr","app","dep"][w-50]].push(C)}}return o}},eSoh:function(){},jyJ7:function(){}});